<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="狂奔的小马的博客，关注WEB前端开发，记录生活，总结工作经验！"><title>移动端全兼容的flexbox | 狂奔的小马</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">移动端全兼容的flexbox</h1><a id="logo" href="/.">狂奔的小马</a><p class="description">Opportunities are always open to those who prepared for it</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">移动端全兼容的flexbox</h1><div class="post-meta">Jun 29, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/06/29/mobile-flexbox/" href="/2016/06/29/mobile-flexbox/#comments" class="ds-thread-count"></a><div class="post-content"><p>说起flexbox，都算是件陈年旧事了，它是2009年W3C提出的一种全新的可伸缩的CSS布局方式。依赖flexbox，我们可以更简单，高效的完成可伸缩式页面的布局。</p>
<p>业界与flexbox的相关教程文章也是各式各样，新旧交替，很多小伙伴对flexbox想用又不敢用，究其原因也就是即分不清它各个版本的编写规范，又苦恼于大家总是挂在嘴边的一句“flexbox兼容性不好”。 所以今儿前来总结一个精华干货贴，回顾那些楼主在项目里用过的flexbox，来谈谈那些不用苦恼“兼容”的flexbox最佳实例（本文只聊移动端）。</p>
<h2 id="Part1-先聊聊历史："><a href="#Part1-先聊聊历史：" class="headerlink" title="Part1 先聊聊历史："></a>Part1 先聊聊历史：</h2><p>在2009年最早版本的Flexbox规范中，我们编写为“display:box;”，</p>
<p>中期版本的Flexbox；我们编写为“display:flexbox;”</p>
<p>而目前的规范版本，我们定义“display:flex;”。flexbox规范的制定可谓是艰辛百变，</p>
<p>但目前使用的最新版本草案已于今年3-1日正式进入W3C的候选推荐标准（Candidate Recommendation）阶段，这也就意味着关于flexbox的最终规范即将落地。</p>
<h2 id="Part2-版本VS兼容："><a href="#Part2-版本VS兼容：" class="headerlink" title="Part2 版本VS兼容："></a>Part2 版本VS兼容：</h2><p>如下图所示，除了Opera mobile12，移动端的各大浏览器都是支持flexbox的旧版语法的，但不包含flex的wrap属性。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190829343.png" alt=""></p>
<h2 id="Part3-信手拈来的flexbox最佳实例"><a href="#Part3-信手拈来的flexbox最佳实例" class="headerlink" title="Part3 信手拈来的flexbox最佳实例"></a>Part3 信手拈来的flexbox最佳实例</h2><p>(以下代码片段均遵循flexbox移动端全兼容性写法，已验证机型列表见文章最后) 我们先来回顾一下flexbox的属性体系：直白的解释，我们常说的“flexbox”其实包含“父元素”，“子元素”2个部分，将“父元素”定义为一个flexbox，则在”父元素”里的“子元素们”就被赋予了可以自由伸缩的能力。 赋予神奇能力的代码片段如下：</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190820412.png" alt=""></p>
<p>1.用flex做提示icon</p>
<p>这里用到了flex父元素的“align-items”属性。 指定元素沿侧轴对齐方式 <code>align-item: flex-start | flex-end | center | space-between | space-around | stretch</code>; </p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190821107.png" alt=""></p>
<p>一句属性设置，就可以完成顶部对齐，居中对齐或是底部对齐的切换，简单方便值得拥有。</p>
<p>【Demo Link】: <a href="http://jsfiddle.net/tikizzz/2zuthdap/" target="_blank" rel="external">http://jsfiddle.net/tikizzz/2zuthdap/</a></p>
<p>2.用flex做列表元素</p>
<p>同样，只需要用flex父元素的“align-items”属性，就可以制作灵活多变的列表元素了。如下图所示，3种状态的变形都不需要修改CSS文件，只需要按需隐藏DOM结构就搞定。</p>
<p>这里多注意1个Tips：像下图例子中的左侧图片，右侧按钮这些固定宽度的子元素，不需要增加“flex:1”的能力，维持原样即可。</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/20160510190821663.png" alt=""></p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190822302.png" alt=""></p>
<p>【Demo Link】: <a href="https://jsfiddle.net/tikizzz/ztdfq5dw/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/ztdfq5dw/</a></p>
<p>3.用flex做tab</p>
<p>做均分的tab，应该是flexbox最常见的一个功能了，实现原理很简单，只需要给“父元素”，“子元素”分别赋予“display：flex”,”flex：1″即可。子元素的宽度不会根据内容的长短而发生改变。如下图所示，前台同学增加或删减tab数量，只需要增减DOM结构即可，无需样式的修改。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190824335.png" alt=""></p>
<p>★重点兼容TIPS:  在旧版的规范中，使用比例伸缩布局时，子元素的内容长短不同会导致无法“等分”，这个时候，我们需要给子元素设置一个“width:0%”来解决问题。 ★重点兼容TIPS:  不要给flexbox里的子元素设置“margin:auto”的属性，在部分安卓机下，它会导致该元素的宽度撑开到100%占位</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/20160510190823505.png" alt=""></p>
<p>【Demo Link】: <a href="https://jsfiddle.net/tikizzz/ztdfq5dw/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/ztdfq5dw/</a></p>
<p>4.用flex做导航(只适合三项的布局) 一样也是利用align-items的属性即可，就可以轻松完成flexbox的导航制作。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190825215.png" alt=""></p>
<p>但是导航变成单按钮布局的时候，会导致标题栏的位位移，不是特别的推荐。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190824773.png" alt=""></p>
<p>【Demo Link】: <a href="https://jsfiddle.net/tikizzz/g2Lj417p/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/g2Lj417p/</a></p>
<p>5.用flex做搜索条 利用align-items的属性，还可以轻松完成flexbox的搜索条制作。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190825647.png" alt=""></p>
<p>【Demo Link】:<a href="https://jsfiddle.net/tikizzz/yut2qv9b/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/yut2qv9b/</a></p>
<p>6.用flex做垂直居中(单/多)</p>
<p>前面说的5个实例，其实都只用到了flexbox的基础属性+“align-items”属性。千万不要以为结束了，flexbox还可以做更多的事。例如一直很困扰我们的“垂直居中”：flexbox可以轻松实现不定宽高，不限数量的元素“水平+垂直居中”在屏幕中。</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/2016051019082690.png" alt=""></p>
<p>这部分用到了flexbox的另外一个属性：指定元素沿主轴对齐方式 <code>justify-content: flex-start | flex-end | center space-between | space-around</code>; 将“沿着主轴对齐方式+沿着侧轴对齐的方式”设置为居中，无论子元素是什么形态，都可以随时随地的“水平垂直居中”了。</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/20160510190826651.png" alt=""></p>
<p>【Demo Link】:<a href="https://jsfiddle.net/tikizzz/zq8cdkfg/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/zq8cdkfg/</a></p>
<p>7.用flex做垂直弹性布局</p>
<p>顶部栏，底部栏fixed，中间的元素支持滚动条，这是移动端常见的页面结构模型，我们熟称为“垂直弹性布局”。使用传统的flxed写法总是会给一些安卓机带来无法避免的烦人bug。其实只要巧妙利用flexbox的转换方向的属性，就可以轻松实现这个结构模型了。如下图，其实也就是一个横着的弹性伸缩模型，倒转垂直的弹性伸缩模型了。</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/20160510190827298.png" alt=""></p>
<p>这部分用到了flexbox的方向属性：指定主轴的伸缩流方向 flex-direction: row | column ; 这里注明一下，box-orient，box-direction是最老版本flex-box控制方向的2种写法，默认方向均为横向，为保证兼容性，我们需要将它们2条都写全。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2016/05/20160510190827905.png" alt=""></p>
<p>【Demo Link】:<a href="https://jsfiddle.net/tikizzz/obLp1mga/" target="_blank" rel="external">https://jsfiddle.net/tikizzz/obLp1mga/</a></p>
<p>最后，附赠一个全DEMO的合集：<a href="http://115.159.36.96/tikizheng/flextest/demo.html" target="_blank" rel="external">http://115.159.36.96/tikizheng/flextest/demo.html</a></p>
<p>##Part4 其他<br>希望以上的demo对移动端开发的小伙伴们有用。当然，flexbox还有一些很帅气的属性，例如order，wrap等等，它们只是暂时还不被移动端所有的系统兼容，咋们的x5内核已经刚刚表示全面兼容flexbox的所有属性。关于flexbox的未来我们敬请期待就好！ 另，附赠  &lt;&lt;移动端属性全兼容自查表&gt;&gt;</p>
<p>已测机型</p>
<p><img src="https://isux.tencent.com/wp-content/uploads/2016/05/20160510190828445.png" alt=""></p>
<p>备注：</p>
<p>1.以上机型是根据友盟，应用宝，微信及腾讯云运营活动数据统计整合得出的Top7机型。</p>
<p>2.Top8-10的华为，oppo，魅族机型挑选于各品牌的占比最高机型，为品牌差异性测试而存在。</p>
<p>3.黄色标注的分辨率为Top6的热门分辨率，占比超过iOS市场87%，Android市场的50%（安卓分辨率太多，剩余50%分辨率占比较为均分零散，故暂不列入必测范围）。</p>
<p>4.iOS8.0+，Android4.0+涵盖了移动端90%的系统，其中iOS9.0+占比超过65%，Android4.4+占比超过60%，测试用例不强行要求涵盖各机型所有版本的系统，以最新版本为准，若因老版本出现bug次数大于3次，再加设为必测的问题版本。</p>
</div><a data-url="http://bardma.github.io/2016/06/29/mobile-flexbox/" data-id="ciq1r27xg0005blzv8ih7ohn3" class="article-share-link">分享到</a><div class="tags"><a href="/tags/前端/">前端</a></div><div class="post-nav"><a href="/2016/04/29/js-datetime/" class="next">javascript时间戳和日期字符串相互转换</a></div><div data-thread-key="2016/06/29/mobile-flexbox/" data-title="移动端全兼容的flexbox" data-url="http://bardma.github.io/2016/06/29/mobile-flexbox/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/06/29/mobile-flexbox/" data-title="移动端全兼容的flexbox" data-url="http://bardma.github.io/2016/06/29/mobile-flexbox/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://bardma.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Gulp/" style="font-size: 15px;">Gulp</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/那年那月/" style="font-size: 15px;">那年那月</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/mobile-flexbox/">移动端全兼容的flexbox</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/js-datetime/">javascript时间戳和日期字符串相互转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/01/learn-reflux/">RefluxJS学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/10/bye-to-weiba/">这一次，我又毕业了</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/16/install-npm/">卸载npm,升级npm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/02/money-and-bed/">求证把一张床铺满需要多少钱？</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/02/gulp-config/">Use Gulp</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.firstphp.com/" title="狂奔的螞蟻的博客" target="_blank">狂奔的螞蟻的博客</a><ul></ul><a href="http://zipperary.com/" title="Zippera's blog" target="_blank">Zippera's blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">狂奔的小马.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'maqibin'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>